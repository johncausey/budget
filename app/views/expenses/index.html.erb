<script>
  $(document).ready(function(){
    $(function() {
        return $("#datepicker").datepicker({
          dateFormat: 'yy-mm-dd',
          stepMonths: 0
        });
      });
  });
</script>
<div class="row">
  <div class="large-12 columns date-row">
    <div class="row">
      <div class="large-4 columns">
        <h3><%= Time.zone.now.strftime("%A") %> <small><%= Time.zone.now.strftime("%b %d, %Y") %></small></h3>
      </div>
      <div class="large-8 columns">
        <h3 class="right"><%= how_much_money_is_left %></h3>
      </div>
    </div>
    <hr />
  </div>
</div>

<div class="row">
  <div class="large-3 columns">
    <ul class="side-nav">
      <li><%= link_to "#{this_month} Overview", current_month_path %></li>
      <li><%= link_to "Savings", savings_path %></li>
      <li class="active"><%= link_to "Expenses", expenses_path %></li>
      <li><%= link_to "Income", incomes_path %></li>
      <li class="divider"></li>
      <li><%= link_to "Account Information", account_information_path %></li>
    </ul>
  </div>
  <div class="large-9 columns">
    <div class="row">
      <div class="large-12 columns">
        <fieldset>
          <div class="large-8 columns">
          <h4>Money Spent. <small>Add an expense for <%= this_month %>.</small></h4>
          <hr />
          <%= form_for([@user, @user.expenses.build], :html => { :style => 'margin-bottom: 0px;' }) do |f| %>
            <div class="row">
              <div class="small-12 columns">
                <div class="small-4 columns">
                  <%= f.label :name, "Expense Name", :class => "right inline" %>
                </div>
                <div class="small-8 columns left">
                  <%= f.text_field :name, :placeholder => "Coffee" %>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="small-12 columns">
                <div class="small-4 columns">
                  <%= f.label :amount, "Dollar Amount", :class => "right inline" %>
                </div>
                <div class="small-4 columns left">
                  <%= f.text_field :amount, :placeholder => "$37.50" %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="small-12 columns">
                <div class="small-4 columns">
                  <%= f.label :date_added, "Date Spent", :class => "right inline" %>
                </div>
                <div class="small-4 columns left">
                  <%= f.text_field :date_added, :placeholder => "yyyy-mm-dd", :id => "datepicker" %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="small-12 columns">
                <div class="small-4 columns">
                  <label class="right inline">Fixed / Fluid</label>
                </div>
                <div class="small-8 columns">
                  <div>
                    <%= f.radio_button :fixed, false, :class => "inline" %>
                    <%= f.label :fixed, "Fluid Expense", :value => false, :style => "display:inline !important;" %>
                  </div>
                  <div style="padding-top: 5px;">
                    <%= f.radio_button :fixed, true, :class => "inline" %>
                    <%= f.label :fixed, "Fixed Expense", :value => true, :style => "display:inline !important;" %>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <br />
              <br />
              <div class="small-12 columns">
                <div class="small-12 columns">
                  <%= f.submit "Add this Expense", :class => "button right" %>
                </div>
              </div>
            </div>
          <% end %>
          </div>
          <div class="large-4 columns">
            <h5>What's an expense?</h5>
            <p>
              A <strong><em>fixed</em></strong> expense is anything that you pay each month, this includes rent, car payments, phone bill, and others. Even if the price changes, it's still a fixed expense if you pay it each month.
            </p>
            <p>
              A <strong><em>fluid</em></strong> expense is everything else- coffee, food, registrations, clothing, etc. Keeping fluid expenses low helps you save more each month.
            </p> 
          </div>
        </fieldset>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
          <table style="width: 100%">
            <thead>
              <tr>
                <th class="fixed-font">Fixed Expenses for <%= this_month %></th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <% if @fixed_expenses.exists? %>
                <% @fixed_expenses.each do |expense| %>
                  <tr>
                    <td style="width: 65%">
                      <%= number_to_currency(expense.amount) %> &nbsp; 
                      <%= expense.name %>
                    </td>
                    <td>
                      <%= expense.date_added.strftime("%A, %B %d") %> | 
                      <%= link_to 'remove', expense, method: :delete, data: { confirm: "Are you sure you want to remove this expense?" } %>
                    </td>
                  </tr>
                <% end %>
              <% else %>
                <tr>
                  <td style="width: 65%">
                    <h5>Currently no fixed expenses</h5>
                  </td>
                  <td>
                    
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <table style="width: 100%">
            <thead>
              <tr>
                <th class="fluid-font">Fluid Expenses for <%= this_month %></th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <% if @fluid_expenses.exists? %>
                <% @fluid_expenses.each do |expense| %>
                  <tr>
                    <td style="width: 65%">
                      <%= number_to_currency(expense.amount) %> &nbsp;
                      <%= expense.name %>
                    </td>
                    <td><%= expense.date_added.strftime("%A, %B %d") %> | 
                    <%= link_to 'remove', expense, method: :delete, data: { confirm: "Are you sure you want to remove this expense?" } %></td>
                  </tr>
                <% end %>
              <% else %>
                <tr>
                  <td style="width: 65%">
                    <h5>Currently no fluid expenses</h5>
                  </td>
                  <td>
                    
                  </td>
                </tr>
                <% end %>
            </tbody>
          </table>
      </div>
    </div>
  </div>

</div>
