<script>
  $(document).ready(function(){
    $(function() {
        return $("#datepicker").datepicker({
          dateFormat: 'yy-mm-dd',
          stepMonths: 0
        });
      });
  });
</script>
<div class="row">
  <div class="large-12 columns">
    <h1><%= Time.now.strftime("%A") %> <small><%= Time.now.strftime("%b %d, %Y") %></small></h1>
    <hr />
  </div>
</div>

<div class="row">
  <div class="large-3 columns">
    <ul class="side-nav">
      <li><%= link_to "#{this_month} Overview", current_month_path %></li>
      <li><%= link_to "Savings", savings_path %></li>
      <li class="active"><%= link_to "Expenses", expenses_path %></li>
      <li><%= link_to "Income", incomes_path %></li>
      <li><a href="#">Progress for <%= Time.now.strftime("%Y") %></a></li>
      <li class="divider"></li>
      <li><%= link_to "Account Information", edit_user_path(current_user) %></li>
    </ul>
  </div>
  <div class="large-9 columns">
    <h3>What you've spent for <%= this_month %></h3>
    <div class="row">
      <div class="large-8 columns">
        <fieldset>
          <legend>Add new expense</legend>
          <%= form_for([@user, @user.expenses.build]) do |f| %>
            <div class="row">
              <div class="small-10 columns">
                <div class="small-6 columns">
                  <%= f.label :name, "Expense Name", :class => "right inline" %>
                </div>
                <div class="small-6 columns left">
                  <%= f.text_field :name, :placeholder => "Coffee" %>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="small-10 columns">
                <div class="small-6 columns">
                  <%= f.label :amount, "Dollar Amount", :class => "right inline" %>
                </div>
                <div class="small-4 columns left">
                  <%= f.text_field :amount, :placeholder => "$37.50" %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="small-10 columns">
                <div class="small-6 columns">
                  <label class="right inline">Fixed / Fluid</label>
                </div>
                <div class="small-6 columns">
                  <%= f.radio_button :fixed, false, :class => "inline" %>
                  <%= f.label :fixed, "Fluid Expense", :value => false, :style => "display:inline !important" %>
                  <br />
                  <%= f.radio_button :fixed, true, :class => "inline" %>
                  <%= f.label :fixed, "Fixed Expense", :value => true, :style => "display:inline !important" %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="small-10 columns">
                <div class="small-6 columns">
                  <%= f.label :date_added, "Date Added", :class => "right inline" %>
                </div>
                <div class="small-5 columns left">
                  <%= f.text_field :date_added, :id => "datepicker" %>
                </div>
              </div>
            </div>

            <div class="row">
              <br />
              <br />
              <div class="small-11 left columns">
                <%= f.submit "Add Expense", :class => "button right" %>
              </div>
            </div>
          <% end %>
        </fieldset>
      </div>

      <div class="large-4 columns">
        <h5>What's an expense?</h5>
        <p>
          Expenses are everywhere! An expense is anything you spend money on during this month.
        </p>
        <p>
          A <em>fixed</em> expense is anything that you pay each month, this includes rent, car payments, cable, phone bill, and others. Even if the price changes, it's still a fixed expense if you pay it each month.
          <br />
          A <em>fluid</em> expense is everything else- coffee, food, registrations, clothing, etc.
        </p> 
      </div>
    </div>



    <div class="row">
      <div class="large-12 columns">
          <table style="width: 100%">
            <thead>
              <tr>
                <th class="fixed-font">Fixed Expenses for <%= this_month %></th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <% @fixed_expenses.each do |expense| %>
                <tr>
                  <td style="width: 65%">
                    <%= number_to_currency(expense.amount) %> &nbsp; 
                    <%= expense.name %>
                  </td>
                  <td>
                    <%= expense.date_added.strftime("%A, %B %d") %> | 
                    <%= link_to 'delete', expense, method: :delete, data: { confirm: "Are you sure you want to remove this expense?" } %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <table style="width: 100%">
            <thead>
              <tr>
                <th class="fluid-font">Fluid Expenses for <%= this_month %></th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <% @fluid_expenses.each do |expense| %>
                <tr>
                  <td style="width: 65%">
                    <%= number_to_currency(expense.amount) %> &nbsp;
                    <%= expense.name %>
                  </td>
                  <td><%= expense.date_added.strftime("%A, %B %d") %> | 
                  <%= link_to 'remove', expense, method: :delete, data: { confirm: "Are you sure you want to remove this expense?" } %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
      </div>
    </div>




  </div>

</div>
